<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script type="text/javascript">
	function toHex(r, g, b) {
		Pr = r.toString(16).length == 1 ? (0 + r.toString(16)) : r.toString(16)
			Pg = g.toString(16).length == 1 ? (0 + g.toString(16)) : g.toString(16)
			Pb = b.toString(16).length == 1 ? (0 + b.toString(16)) : b.toString(16)
			return Pr + Pg + Pb
	}
	var parseColor = function (val, op) {
		    var r,
		    g,
		    b,
		op = op || 1,
		hex,
		filter;
		     // 默认rgb
		    if(/r/.test(val)) {
			        var arr = val.match(/\d+/g);
			        r = parseInt(arr[0]);
			        g = parseInt(arr[1]);
			        b = parseInt(arr[2]);
			op = op;
			hex = '#' + toHex(r, g, b)
				filter = '#' + Math.floor(op * 255).toString(16) + toHex(r, g, b);
			    
		}
		     // 进制转换
		    else if (/#/.test(val)) {
			hex = val
				        var len = val.length;
			         // #ffffff
			        if(len === 7) {
				            r = parseInt(val.slice(1, 3), 16);
				            g = parseInt(val.slice(3, 5), 16);
				            b = parseInt(val.slice(5), 16);
				op = op;
				filter = '#' + Math.floor(op * 255).toString(16) + toHex(r, g, b);
				        
			}
			         // #fff
			        else if (len === 4) {
				            r = parseInt(val.charAt(1) + val.charAt(1), 16);
				            g = parseInt(val.charAt(2) + val.charAt(2), 16);
				            b = parseInt(val.charAt(3) + val.charAt(3), 16);
				op = op;
				filter = '#' + Math.floor(op * 255).toString(16) + toHex(r, g, b);
				        
			}
			    
		} else {
			        alert('颜色格式不正确,请重新输入');
			    
		}
		    return {
			        r : r,
			        g : g,
			        b : b,
			op : op,
			hex : hex,
			filter : filter
			    
		}
	};
	//console.log(parseColor('#ffffff',1))
	//console.log(parseColor('#fff',0.5))
	//console.log(parseColor('#000000',0.3))
	//console.log(parseColor('rgb(122,34,214)',0.2))
</script>
</head>
<body>

<label for="colorIn">输入要转换的颜色(格式rgb(1,2,3)或#fff或#ffffff)</label><input type="text" name="" id="colorIn" />
<label for="opIn">输入要转换的透明度(0-1)</label><input type="text" name="" id="opIn" />
<input type="button" value="转换" id="cButton"/>
转换结果：
<label for="rgbaR">rgba</label><input type="text" name="" id="rgbaR" />
<label for="hexR">hex</label><input type="text" name="" id="hexR" />
<label for="msfilterR">msfilter</label><input type="text" name="" id="msfilterR" />
<script type="text/javascript">
function $(el){
return document.getElementById(el)
}

var cFrom = $('colorIn');
var cButton = $('cButton');
var cOp = $('opIn');
var rgbaR = $('rgbaR');
var hexR = $('hexR');
var msfilterR = $('msfilterR');
cButton.onclick=function(){
var result = parseColor(cFrom.value,cOp.value)
rgbaR.value = 'rgba('+result.r+','+result.g+','+result.b+','+result.op+')'
hexR.value = result.hex;
msfilterR.value = result.filter;
}
</script>
</body>
</html>